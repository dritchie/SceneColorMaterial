\section{Introduction}
\label{sec:introduction}

%% Hook and motivation
From graphic and web design, to fashion and fabrics, to interior design, colored patterns are everywhere. While almost anyone with normal color vision can distinguish patterns that they like from those they don't, \emph{creating} attractive patterns is difficult: it requires an extensive working knowledge of color and spatial aesthetics. For the purposes of this paper, we define a colored pattern to have two parts: a \emph{pattern template}, which specifies a creative decomposition of space into regions, as well as which regions must map to the same color; and a set of \emph{colors} assigned to those regions. Even the more constrained task of coloring an existing pattern template can be challenging, as it still exhbis a daunting array of coloring options. Experienced artists and enthusiasts often seek feedback and inspiration from online communities such as Colourlovers\footnote{http://www.colourlovers.com/}.

%% Goals
Can computation make the pattern coloring process easier for artists of all levels by automatically suggesting colorings? If a computational colorization tool existed, what criteria should it meet? Such a tool should be able generate pattern colorings that evoke a particular desired style, to accomodate different user preferences. It should generate a variety of different suggestions, so that an uncertain or inexperienced user can explore the space of possibilities. It should be able to generate suggestions automatically, but it should also expose controls for users to refine their criteria.

%% Challenges
Building such a system is difficult, as it requires a computational encoding of the properties that make a coloring desirable. There are many principles of aesthetics that might be relevant, such as any of the myriad of different color harmony rules~\cite{ColorHarmonyBook} or principles of art such as contrast and dominance~\cite{ArtPrinciples}. But which of these principles apply to which patterns? For those that do apply, which are the most important? Even assuming an answer to these questions, there is still the problem of how to actually \emph{generate} many, diverse new colorings that satisfy the desired properties.

%% Our approach
In this paper, we present a probabilistic approach to automatic pattern colorization. Our main contribution is a probabilistic factor graph model that can be trained on example patterns and sampled to generate new colorings for a target pattern template. The general-purpose factor graph framework allows us to incorporate terms in our model both for color compatibility and spatial consistency. The individual terms, as well as the relative importance of each term, are automatically trained using machine learning techniques, statistically capturing the desirable properties of the example patterns. By combining Markov Chain Monte Carlo sampling with sample-diversification techniques commonly used for information retrieval, our model can generate a wide variety of attractive colorings. And, via the use of conditional probabilistic inference or the addition of simple constraint factors, users can exercise a high degree of control over the generated suggestions.

%% Summary of results
We demonstrate the effectiveness of our model for a variety of constrained and unconstrained coloring suggestion tasks. We also show real-world applications of our automatic coloring system to 3D scene design and web design. Finally, we evaluate the quality of colorings generated by our model through a judgment study with people recruited online. Automatically-colored patterns were significantly preferred to random colorings and comparable to colorings made by an artist.