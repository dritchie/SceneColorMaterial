\section{Introduction}
\label{sec:introduction}

%% Hook
From graphic and web design, to fashion and fabrics, to interior design, colored patterns are everywhere. Web designers use them as main images, backgrounds, or repeating page elements, fashion designers print them on clothing and accesories, and interior designers employ them on upholstery, wallpaper, drapes, and more.

%% Define our problem domain
A colored pattern has two parts: a \emph{pattern template}, which is a creative decomposition of space into regions, and a set of \emph{colors} assigned to those regions.
Additionally, pattern templates often define constraints on which regions must be assigned the same color: childrens' color-by-numbers exercises and the patterns shared on the popular COLOURlovers\footnote{http://www.colourlovers.com/} website are two such examples. It is this color-by-numbers pattern format that we explore in this paper.

%% Motivation
While many people can easily distinguish patterns that they find pleasing from those they do not, \emph{creating} attractive pattern colorings takes much more time and effort. Because perceived color appearance depends strongly on spatial arrangement, it is difficult for both experienced artists and enthusiasts to anticipate how a specific coloring will appear. Thus, the coloring process involves much trial-and-error and color tweaking. Experienced artists often create quick thumbnail colorings to explore the state space before diving into their final work, or use reference images for inspiration~\cite{ColorPaletteTools}.

%% Goals - criteria for a computational tool
% Should fit into existing practices (allow them to EXPLORE, and allow them to use examples as inspiration)
Despite these challenges, few computational tools exist for assisting with the pattern coloring process. Can computation make this process easier for artists of all levels by automatically suggesting colorings? To be an effective creative support tool, a coloring suggestion system should adapt to different usage scenarios. First, it should output diverse suggestions automatically for uncertain users who want to explore the space of good colorings. Second, the system should accomodate users with different aesthetic preferences by customizing suggestions to evoke a particular desired style. Finally, it should expose controls to let users refine their criteria and guide the suggestion process. 

%% Challenges
Building such a system requires a computational encoding of the properties that make a coloring desirable. There are many principles of aesthetics that might be relevant, such as any of the many different color harmony rules~\cite{ColorHarmonyBook} or artistic principles such as contrast and dominance~\cite{ArtPrinciples}. But which of these principles apply to which patterns and coloring styles? For those that do apply, which are the most important? Even assuming an answer to these questions, there is still the problem of how to actually \emph{generate} many, diverse new colorings that satisfy the desired properties.

%% Our approach
In this paper, we present a probabilistic approach to automatic pattern colorization using factor graphs. Factor graphs have been successfully applied in problems such as synthesizing tiled pattern designs ~\cite{YiTingTiledPatterns} and assigning materials to 3D objects~\cite{MaterialMemex}. Our main contribution is a probabilistic factor graph model that can be trained on example patterns and sampled to generate new colorings for a target pattern template. We incorporate terms in our model for both color compatibility and spatial consistency. The individual terms, as well as the relative importance of each term, are automatically trained using machine learning techniques, statistically capturing the desirable properties of the example patterns. By combining Markov Chain Monte Carlo sampling with sample-diversification techniques commonly used for information retrieval, our model can generate a wide variety of attractive colorings. And, via the use of conditional probabilistic inference or the addition of simple constraint factors, users can exercise control over the generated suggestions.

%% Summary of results
We demonstrate the effectiveness of our model for a variety of constrained and unconstrained coloring suggestion tasks. We also show real-world applications of our automatic coloring system to 3D scene design and web design. Finally, we evaluate the quality of colorings generated by our model through a judgment study with people recruited online. Automatically-colored patterns were significantly preferred to random colorings and comparable to colorings made by an artist.

%\remark{S:Possibly change to make consistent with results once we have them.}
%\remark{S:It would be really cool if the suggested colorings are rated comparably to artist colorings. Though, the conservative part of me thinks its more likely that the suggestions will be somewhere between random and artist...particularly since if we use artists from the dataset, their patterns are already quite popular!}